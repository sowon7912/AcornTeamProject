<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="photo">
	<select id="photoDataList" resultType="pvo">
		select * from photo
	</select>
	<select id="photoDetail" resultType="pvo" parameterType="int">
		select * from photo where photo_seq_no=#{num}
	</select>
	<update id="photoUpdateReadcount" parameterType="int">
		update photo set photo_hits=photo_hits+1 where photo_seq_no=#{num}
	</update>
	<select id="getMemberData" resultType="mvo" parameterType="int">
		select * from member where member_no in (select member_no from photo where photo_seq_no=#{num})
	</select>
	<select id="getReplyData" resultType="cvo" parameterType="int">
		select r.p_reply_content, r.reg_date, m.member_nickname from p_reply r, member m, photo p where p.member_no = m.member_no and p.photo_seq_no=#{num}
	</select>
	<select id="getReplyCount" resultType="int" parameterType="int">
		select count(*) from p_reply where member_no in (select member_no from photo where photo_seq_no=#{num})
	</select>
</mapper>